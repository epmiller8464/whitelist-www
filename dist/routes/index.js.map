{"version":3,"sources":["../../routes/index.js"],"names":["express","require","router","Router","authenticate","check","validationResult","query","matchedData","sanitize","sanitizeQuery","Subscriber","Email","get","req","res","next","render","title","site_key","process","env","RECAPTCHA_KEY","VIDEO_URL","SWYTCH_VIDEO_URL","WP_URL","WHITEPAPER_URL","csrfToken","post","module","exports"],"mappings":"AAAA;;AACA,IAAMA,UAAUC,QAAQ,SAAR,CAAhB;AACA,IAAMC,SAASF,QAAQG,MAAR,EAAf;AACA,IAAMC,eAAeH,QAAQ,qBAAR,CAArB;;eACyCA,QAAQ,yBAAR,C;IAAlCI,K,YAAAA,K;IAAOC,gB,YAAAA,gB;IAAkBC,K,YAAAA,K;;gBACeN,QAAQ,0BAAR,C;IAAxCO,W,aAAAA,W;IAAaC,Q,aAAAA,Q;IAAUC,a,aAAAA,a;;gBACTT,QAAQ,cAAR,C;IAAdU,U,aAAAA,U;;gBACSV,QAAQ,aAAR,C;IAATW,K,aAAAA,K;AACP;;;AACAV,OAAOW,GAAP,CAAW,GAAX,EAAgB,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AACxCD,MAAIE,MAAJ,CAAW,OAAX,EAAoB;AAClBC,WAAO,QADW;AAElBC,cAAUC,QAAQC,GAAR,CAAYC,aAFJ;AAGlBC,eAAWH,QAAQC,GAAR,CAAYG,gBAHL;AAIlBC,YAAQL,QAAQC,GAAR,CAAYK,cAJF;AAKlBC,eAAWb,IAAIa,SAAJ;AALO,GAApB;AAOD,CARD;AASA;AACA;AACA;;AAEA;AACA;;;AAIA;;AAEAzB,OAAO0B,IAAP,CAAY,QAAZ,EAAsBxB,YAAtB,EAAoC,UAAUU,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAC5DD,MAAIE,MAAJ,CAAW,OAAX,EAAoB;AAClBC,WAAO,QADW;AAElBC,cAAUC,QAAQC,GAAR,CAAYC,aAFJ;AAGlBK,eAAWb,IAAIa,SAAJ;AAHO,GAApB;AAKD,CAND;;AAQAzB,OAAO0B,IAAP,CAAY,SAAZ,EAAuB,UAAUd,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAC/CD,MAAIE,MAAJ,CAAW,OAAX,EAAoB;AAClBC,WAAO,QADW;AAElBC,cAAUC,QAAQC,GAAR,CAAYC,aAFJ;AAGlBK,eAAWb,IAAIa,SAAJ;AAHO,GAApB;AAKD,CAND;;AAQAzB,OAAOW,GAAP,CAAW,sBAAX,EAAmC,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAC3DD,MAAIE,MAAJ,CAAW,OAAX,EAAoB;AAClBC,WAAO,QADW;AAElBC,cAAUC,QAAQC,GAAR,CAAYC,aAFJ;AAGlBK,eAAWb,IAAIa,SAAJ;AAHO,GAApB;AAKD,CAND;;AAQAE,OAAOC,OAAP,GAAiB5B,MAAjB","file":"index.js","sourcesContent":["'use strict'\nconst express = require('express')\nconst router = express.Router()\nconst authenticate = require('../lib/authenticate')\nconst {check, validationResult, query} = require('express-validator/check')\nconst {matchedData, sanitize, sanitizeQuery} = require('express-validator/filter')\nconst {Subscriber} = require('../lib/model')\nconst {Email} = require('../lib/mail')\n/* GET home page. */\nrouter.get('/', function (req, res, next) {\n  res.render('index', {\n    title: 'Swytch',\n    site_key: process.env.RECAPTCHA_KEY,\n    VIDEO_URL: process.env.SWYTCH_VIDEO_URL,\n    WP_URL: process.env.WHITEPAPER_URL,\n    csrfToken: req.csrfToken()\n  })\n})\n// Every validator method in the validator lib is available as a\n// method in the check() APIs.\n// You can customize per validator messages with .withMessage()\n\n// Every sanitizer method in the validator lib is available as well!\n// ...or throw your own errors using validators created with .custom()\n\n\n\n// confirm_url: buildUrl(`verify/:id?token=${token}`),\n\nrouter.post('/login', authenticate, function (req, res, next) {\n  res.render('login', {\n    title: 'Swytch',\n    site_key: process.env.RECAPTCHA_KEY,\n    csrfToken: req.csrfToken()\n  })\n})\n\nrouter.post('/signup', function (req, res, next) {\n  res.render('index', {\n    title: 'Swytch',\n    site_key: process.env.RECAPTCHA_KEY,\n    csrfToken: req.csrfToken()\n  })\n})\n\nrouter.get('/signup/confirmation', function (req, res, next) {\n  res.render('index', {\n    title: 'Swytch',\n    site_key: process.env.RECAPTCHA_KEY,\n    csrfToken: req.csrfToken()\n  })\n})\n\nmodule.exports = router"]}