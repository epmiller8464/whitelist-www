{"version":3,"sources":["../../routes/users.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"users.js","sourcesContent":["// 'use strict'\n// let express = require('express')\n// let router = express.Router()\n// let validator = require('express-validator')\n// const {User} = require('../lib/model')\n// // configure an array of available methods per endpoint for pre-flight requests\n// router.get('/me/logout', function (req, res, next) {\n// // router.get('/me', authenticate, function (req, res, next) {\n//   req.logOut()\n//   req.user = null\n//   req.session = null\n//   res.locals = null\n//   // res.clearCookie('lsr_token', {path: '/admin'})\n//   res.redirect('/')\n// })\n//\n// // CRUD for '/'\n// router.get('/', function (req, res, next) {\n//   try {\n//     User.find((error, Users) => {\n//       if (error) {\n//         return next(error)\n//       }\n//       res.status(200).json(response(req, Users.map((o) => { return o.toObject() })))\n//     })\n//   } catch (e) {\n//     return res.status(500).json(errorResponse('ServerError', e.toString()))\n//   }\n//\n// })\n//\n// router.get('/:id', function (req, res, next) {\n//   req.checkParams('id', 'user id needs to be alphanumeric').isAlphanumeric()\n//\n//   req.getValidationResult().then(function (result) {\n//     if (!result.isEmpty()) {\n//       let errors = result.array()\n//       return res.send(errors)\n//     }\n//     else {\n//       // continue normally and fetch user\n//       try {\n//         User.findById(req.params.id, (error, User) => {\n//           if (error) {\n//             return next(error)\n//           }\n//\n//           if (User) {\n//             return res.status(200).json(response(req, User.toObject()))\n//           }\n//           else {\n//             return res.status(404).json({error: 'Not Found'})\n//           }\n//         })\n//       } catch (e) {\n//         return res.status(500).json(errorResponse('ServerError', e.toString()))\n//       }\n//     }\n//   })\n//\n// })\n//\n// router.get('/:id/bots', function (req, res, next) {\n//   req.checkParams('id', 'user id needs to be alphanumeric').isAlphanumeric()\n//\n//   req.getValidationResult().then(function (result) {\n//     if (!result.isEmpty()) {\n//       let errors = result.array()\n//       return res.send(errors)\n//     }\n//     else {\n//       try {\n//         Bot.find({admins: {$in: [req.params.id]}}, function (error, Bots) {\n//           if (error) {\n//             return next(error)\n//           }\n//\n//           res.status(200).json(response(req, Bots.map(function (o) { return o.toObject()})))\n//         })\n//\n//       } catch (e) {\n//         return res.status(500).json(errorResponse('ServerError', e.toString()))\n//       }\n//     }\n//   })\n//\n// })\n//\n// router.post('/', function (req, res, next) {\n//\n//   req.checkBody('email', 'Enter valid email address').optional().isEmail()\n//   req.checkBody('accessToken',\n//     'Add accessToken when creating user').optional().isAlphanumeric()\n//   req.checkBody('refreshToken',\n//     'Add accessToken when creating user').optional().isAlphanumeric()\n//   req.checkBody('date_added').optional().isDate()\n//\n//   req.sanitizeBody('email_verified').toBoolean()\n//   req.sanitizeBody('name').trim()\n//   req.sanitizeBody('accessToken').trim()\n//   req.sanitizeBody('refreshToken').trim()\n//\n//   let emailOptions = {\n//     all_lowercase: true,\n//     gmail_remove_dots: false,\n//\n//   }\n//   if (req.body['email']) {\n//     req.sanitizeBody('email').normalizeEmail(emailOptions).trim()\n//   }\n//\n//   if (req.body['date_added']) {\n//     req.sanitizeBody('date_added').optional().toDate()\n//   }\n//\n//   req.getValidationResult().then(result => {\n//     if (!result.isEmpty()) {\n//       let errors = result.array()\n//       return res.send(errors)\n//     }\n//     else {\n//       try {\n//         User.create(req.body, (error, User) => {\n//           if (error) {\n//             return next(error)\n//           }\n//\n//           return res.status(200).json(response(req, User.toObject()))\n//         })\n//\n//       } catch (e) {\n//         return res.status(500).json(errorResponse('ServerError', e.toString()))\n//       }\n//\n//     }\n//   })\n//\n// })\n//\n// router.put('/:id', function (req, res, next) {\n//   req.checkParams('id', 'user id needs to be alphanumeric').isAlphanumeric()\n//   req.checkBody('email', 'Enter valid email address').optional().isEmail()\n//   req.checkBody('accessToken',\n//     'Add accessToken when creating user').optional().isAlphanumeric()\n//   req.checkBody('refreshToken',\n//     'Add accessToken when creating user').optional().isAlphanumeric()\n//   req.checkBody('date_added').optional().isDate()\n//\n//   req.sanitizeBody('email_verified').toBoolean()\n//   req.sanitizeBody('name').trim()\n//   req.sanitizeBody('accessToken').trim()\n//   req.sanitizeBody('refreshToken').trim()\n//   let emailOptions = {\n//     all_lowercase: true,\n//     gmail_remove_dots: false,\n//\n//   }\n//\n//   if (req.body['email']) {\n//     req.sanitizeBody('email').normalizeEmail(emailOptions).trim()\n//   }\n//\n//   if (req.body['date_added']) {\n//     req.sanitizeBody('date_added').optional().toDate()\n//   }\n//\n//   req.getValidationResult().then(result => {\n//     if (!result.isEmpty()) {\n//       let errors = result.array()\n//       return res.send(errors)\n//     }\n//     else {\n//       try {\n//\n//         User.findByIdAndUpdate(req.params.id, req.body, (error, User) => {\n//           if (error) {\n//             return next(error)\n//           }\n//\n//           return res.status(200).json(response(req, User.toObject()))\n//         })\n//       } catch (e) {\n//         return res.status(500).json(errorResponse('ServerError', e.toString()))\n//       }\n//\n//     }\n//   })\n//\n// })\n//\n// router.delete('/:id', function (req, res, next) {\n//   req.checkParams('id', 'user id needs to be number and letters').isAlphanumeric()\n//\n//   req.getValidationResult().then(result => {\n//     if (!result.isEmpty()) {\n//       let errors = result.array()\n//       return res.send(errors)\n//     }\n//     else {\n//       try {\n//         User.findByIdAndRemove(req.params.id, (error, User) => {\n//           if (error) {\n//             return next(error)\n//           }\n//\n//           return res.status(200).json({message: 'deleted'})\n//         })\n//\n//       } catch (e) {\n//         return res.status(500).json(errorResponse('ServerError', e.toString()))\n//       }\n//     }\n//\n//   })\n// })\n//\n// module.exports = router\n"]}