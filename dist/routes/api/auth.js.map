{"version":3,"sources":["../../../routes/api/auth.js"],"names":["express","require","router","Router","authenticate","check","validationResult","query","matchedData","sanitize","sanitizeQuery","User","Email","accessToken","validate","isEmail","withMessage","trim","normalizeEmail","post","err","req","res","next","status","json","error","message","module","exports"],"mappings":"AAAA;;AACA,IAAMA,UAAUC,QAAQ,SAAR,CAAhB;AACA,IAAMC,SAASF,QAAQG,MAAR,EAAf;AACA,IAAMC,eAAeH,QAAQ,wBAAR,CAArB;;eACyCA,QAAQ,yBAAR,C;IAAlCI,K,YAAAA,K;IAAOC,gB,YAAAA,gB;IAAkBC,K,YAAAA,K;;gBACeN,QAAQ,0BAAR,C;IAAxCO,W,aAAAA,W;IAAaC,Q,aAAAA,Q;IAAUC,a,aAAAA,a;;gBACfT,QAAQ,iBAAR,C;IAARU,I,aAAAA,I;;gBACSV,QAAQ,gBAAR,C;IAATW,K,aAAAA,K;;gBACeX,QAAQ,wBAAR,C;IAAfY,W,aAAAA,W;;AACP,IAAMC,WAAW,CAACT,MAAM,OAAN,EAAeU,OAAf,GAAyBC,WAAzB,CAAqC,kBAArC,EAAyDC,IAAzD,GAAgEC,cAAhE,EAAD,EAAmFT,SAAS,OAAT,EAAkBQ,IAAlB,EAAnF,CAAjB;;AAEAf,OAAOiB,IAAP,CAAY,QAAZ,EAAsBL,QAAtB,EAAgCV,YAAhC,EAA8C,UAACgB,GAAD,EAAMC,GAAN,EAAWC,GAAX,EAAgBC,IAAhB,EAAyB;AACrE,MAAIH,GAAJ,EAAS;AACP,WAAOE,IAAIE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAACC,OAAO,IAAR,EAAcC,SAAS,cAAvB,EAArB,CAAP;AACD;AACD,SAAOJ,MAAP;AACD,CALD,EAKG,UAAUF,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAC3BD,MAAIE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAArB;AACD,CAPD;;AASAG,OAAOC,OAAP,GAAiB3B,MAAjB","file":"auth.js","sourcesContent":["'use strict'\nconst express = require('express')\nconst router = express.Router()\nconst authenticate = require('../../lib/authenticate')\nconst {check, validationResult, query} = require('express-validator/check')\nconst {matchedData, sanitize, sanitizeQuery} = require('express-validator/filter')\nconst {User} = require('../../lib/model')\nconst {Email} = require('../../lib/mail')\nconst {accessToken} = require('../../lib/jsonwebtoken')\nconst validate = [check('email').isEmail().withMessage('must be an email').trim().normalizeEmail(), sanitize('email').trim()]\n\nrouter.post('/login', validate, authenticate, (err, req, res, next) => {\n  if (err) {\n    return res.status(400).json({error: true, message: 'Unauthorized'})\n  }\n  return next()\n}, function (req, res, next) {\n  res.status(200).json({})\n})\n\nmodule.exports = router\n"]}