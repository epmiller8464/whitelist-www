{"version":3,"sources":["../../lib/session.js"],"names":["expressSession","require","session","app","sess","secret","process","env","APP_SECRET","resave","saveUninitialized","NODE_ENV","set","cookie","secure","use","module","exports"],"mappings":"AAAA;;AACA,IAAMA,iBAAiBC,QAAQ,iBAAR,CAAvB;;AAEA,IAAMC,UAAU,SAAVA,OAAU,CAACC,GAAD,EAAS;AACvB,MAAIC,OAAO;AACTC,YAAQC,QAAQC,GAAR,CAAYC,UADX;AAETC,YAAQ,KAFC;AAGTC,uBAAmB;AAHV,GAAX;;AAMA,MAAIJ,QAAQC,GAAR,CAAYI,QAAZ,KAAyB,YAA7B,EAA2C;AACzCR,QAAIS,GAAJ,CAAQ,aAAR,EAAuB,CAAvB,EADyC,CACf;AAC1BR,SAAKS,MAAL,CAAYC,MAAZ,GAAqB,IAArB,CAFyC,CAEf;AAC3B;;AAEDX,MAAIY,GAAJ,CAAQf,eAAeI,IAAf,CAAR;AACD,CAbD;;AAeAY,OAAOC,OAAP,GAAiBf,OAAjB","file":"session.js","sourcesContent":["'use strict'\nconst expressSession = require('express-session')\n\nconst session = (app) => {\n  let sess = {\n    secret: process.env.APP_SECRET,\n    resave: false,\n    saveUninitialized: true\n  }\n\n  if (process.env.NODE_ENV === 'production') {\n    app.set('trust proxy', 1) // trust first proxy\n    sess.cookie.secure = true // serve secure cookies\n  }\n\n  app.use(expressSession(sess))\n}\n\nmodule.exports = session\n"]}