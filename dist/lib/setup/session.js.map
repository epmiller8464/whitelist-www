{"version":3,"sources":["../../../lib/setup/session.js"],"names":["expressSession","require","module","exports","app","sess","secret","process","env","APP_SECRET","resave","saveUninitialized","NODE_ENV","set","cookie","secure","use"],"mappings":"AAAA;;AACA,IAAMA,iBAAiBC,QAAQ,iBAAR,CAAvB;;AAEAC,OAAOC,OAAP,GAAiB,UAACC,GAAD,EAAS;AACxB,MAAIC,OAAO;AACTC,YAAQC,QAAQC,GAAR,CAAYC,UADX;AAETC,YAAQ,KAFC;AAGTC,uBAAmB;AAHV,GAAX;AAKA;AACA;AACA;AACA;AACA;AACA,MAAIJ,QAAQC,GAAR,CAAYI,QAAZ,KAAyB,YAA7B,EAA2C;AACzCR,QAAIS,GAAJ,CAAQ,aAAR,EAAuB,CAAvB,EADyC,CACf;AAC1BR,SAAKS,MAAL,CAAYC,MAAZ,GAAqB,IAArB,CAFyC,CAEf;AAC3B;;AAEDX,MAAIY,GAAJ,CAAQhB,eAAeK,IAAf,CAAR;AACD,CAjBD","file":"session.js","sourcesContent":["'use strict'\nconst expressSession = require('express-session')\n\nmodule.exports = (app) => {\n  let sess = {\n    secret: process.env.APP_SECRET,\n    resave: false,\n    saveUninitialized: true\n  }\n  // app.use(session({\n  //   secret: process.env.APP_SECRET,\n  //   resave: false,\n  //   saveUninitialized: true\n  // }))\n  if (process.env.NODE_ENV === 'production') {\n    app.set('trust proxy', 1) // trust first proxy\n    sess.cookie.secure = true // serve secure cookies\n  }\n\n  app.use(expressSession(sess))\n}\n"]}