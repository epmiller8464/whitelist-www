{"version":3,"sources":["../../lib/authenticate.js"],"names":["passport","require","module","exports","req","res","next","authenticate","err","user","info","redirect","logIn"],"mappings":"AAAA;;AACA,IAAMA,WAAWC,QAAQ,UAAR,CAAjB;;AAEAC,OAAOC,OAAP,GAAiB,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACnCN,WAASO,YAAT,CAAsB,OAAtB,EAA+B,UAAUC,GAAV,EAAeC,IAAf,EAAqBC,IAArB,EAA2B;AACxD,QAAIF,GAAJ,EAAS;AACP,aAAOF,KAAKE,GAAL,CAAP;AACD;AACD,QAAI,CAACC,IAAL,EAAW;AACT,aAAOJ,IAAIM,QAAJ,CAAa,QAAb,CAAP;AACD;AACDP,QAAIQ,KAAJ,CAAUH,IAAV,EAAgB,UAAUD,GAAV,EAAe;AAC7B,UAAIA,GAAJ,EAAS;AACP,eAAOF,KAAKE,GAAL,CAAP;AACD;AACDF;AACD,KALD;AAMD,GAbD,EAaGF,GAbH,EAaQC,GAbR,EAaaC,IAbb;AAcD,CAfD","file":"authenticate.js","sourcesContent":["'use strict'\nconst passport = require('passport')\n\nmodule.exports = (req, res, next) => {\n  passport.authenticate('local', function (err, user, info) {\n    if (err) {\n      return next(err)\n    }\n    if (!user) {\n      return res.redirect('/login')\n    }\n    req.logIn(user, function (err) {\n      if (err) {\n        return next(err)\n      }\n      next()\n    })\n  })(req, res, next)\n}\n"]}