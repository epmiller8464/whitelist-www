{"version":3,"sources":["../../lib/mail.js"],"names":["sgMail","require","setApiKey","process","env","SENDGRID_API_KEY","module","exports","data","Promise","resolve","reject","send","personalizations","to","email","name","substitutions","from","SWYTCH_EMAIL","template_id","subject","then"],"mappings":"AAAA;;AACA,IAAMA,SAASC,QAAQ,gBAAR,CAAf;AACAD,OAAOE,SAAP,CAAiBC,QAAQC,GAAR,CAAYC,gBAA7B;AACAC,OAAOC,OAAP,GAAiB,UAAUC,IAAV,EAAgB;AAC/B,SAAO,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC5CX,WAAOY,IAAP,CAAY;AACVC,wBAAkB,CAAC;AACjBC,YAAI,CAAC;AACHC,iBAAOP,KAAKM,EADT;AAEHE,gBAAMR,KAAKQ;AAFR,SAAD,CADa;AAKjBC,uBAAe;AACb,qBAAWT,KAAKM,EADH;AAEb,wBAAc,KAFD;AAGb,yEAA6DN,KAAKM;AAHrD;AALE,OAAD,CADR;AAYVI,YAAM,EAACH,OAAOZ,QAAQC,GAAR,CAAYe,YAApB,EAAkCH,MAAM,aAAxC,EAZI;AAaVI,mBAAa,sCAbH;AAcVC,eAAS;AAdC,KAAZ,EAeGC,IAfH,CAeQZ,OAfR,EAeiBC,MAfjB;AAgBD,GAjBM,CAAP;AAkBD,CAnBD","file":"mail.js","sourcesContent":["'use strict'\nconst sgMail = require('@sendgrid/mail')\nsgMail.setApiKey(process.env.SENDGRID_API_KEY)\nmodule.exports = function (data) {\n  return new Promise(function (resolve, reject) {\n    sgMail.send({\n      personalizations: [{\n        to: [{\n          email: data.to,\n          name: data.name\n        }],\n        substitutions: {\n          '%email%': data.to,\n          '%discount%': '10%',\n          '%confirm_url%': `https://register.swytch.io/comfirm?email=${data.to}`\n        }\n      }],\n      from: {email: process.env.SWYTCH_EMAIL, name: 'Swytch Team'},\n      template_id: 'a05a4c7a-abec-433c-9434-ce837a8defbf',\n      subject: '⚡⚡Swytch Whitelist⚡⚡'\n    }).then(resolve, reject)\n  })\n}\n"]}