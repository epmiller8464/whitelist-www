{"version":3,"sources":["../app.js"],"names":["express","require","path","favicon","logger","cors","cookieParser","bodyParser","sassMiddleware","requestHeaders","session","sslRedirect","passport","jwt","moment","compression","app","use","disable","exphbs","engine","set","join","__dirname","json","urlencoded","extended","process","env","APP_SECRET","initialize","secret","resave","saveUninitialized","src","dest","indentedSyntax","sourceMap","static","module","exports"],"mappings":"AAAA;;AACA,IAAMA,UAAUC,QAAQ,SAAR,CAAhB;AACA,IAAMC,OAAOD,QAAQ,MAAR,CAAb;AACA,IAAME,UAAUF,QAAQ,eAAR,CAAhB;AACA,IAAMG,SAASH,QAAQ,QAAR,CAAf;AACA,IAAMI,OAAOJ,QAAQ,MAAR,CAAb;AACA,IAAMK,eAAeL,QAAQ,eAAR,CAArB;AACA,IAAMM,aAAaN,QAAQ,aAAR,CAAnB;AACA,IAAMO,iBAAiBP,QAAQ,sBAAR,CAAvB;AACA,IAAMQ,iBAAiBR,QAAQ,sBAAR,CAAvB;AACA;AACA,IAAMS,UAAUT,QAAQ,iBAAR,CAAhB;AACA,IAAMU,cAAcV,QAAQ,oBAAR,CAApB;AACA,IAAMW,WAAWX,QAAQ,UAAR,CAAjB;AACA,IAAMY,MAAMZ,QAAQ,cAAR,CAAZ;AACA,IAAMa,SAASb,QAAQ,QAAR,CAAf;AACA,IAAMc,cAAcd,QAAQ,aAAR,CAApB;AACA,IAAMe,MAAMhB,SAAZ;AACAgB,IAAIC,GAAJ,CAAQF,aAAR;AACAC,IAAIC,GAAJ,CAAQN,YAAY,CAAC,MAAD,EAAS,YAAT,CAAZ,CAAR;AACAF,eAAeO,GAAf;AACAA,IAAIE,OAAJ,CAAY,cAAZ;AACA;AACA,IAAMC,SAASlB,QAAQ,cAAR,GAAf;AACA;AACAe,IAAII,MAAJ,CAAW,KAAX,EAAkBD,OAAOC,MAAzB;AACAJ,IAAIK,GAAJ,CAAQ,OAAR,EAAiBnB,KAAKoB,IAAL,CAAUC,SAAV,EAAqB,OAArB,CAAjB;AACAP,IAAIK,GAAJ,CAAQ,aAAR,EAAuB,KAAvB;AACA;AACA;AACAL,IAAIC,GAAJ,CAAQV,WAAWiB,IAAX,EAAR;AACAR,IAAIC,GAAJ,CAAQV,WAAWkB,UAAX,CAAsB,EAACC,UAAU,KAAX,EAAtB,CAAR;AACAV,IAAIC,GAAJ,CAAQb,OAAO,KAAP,CAAR;AACA;AACAY,IAAIK,GAAJ,CAAQ,QAAR,EAAkBM,QAAQC,GAAR,CAAYC,UAA9B;AACA5B,QAAQ,gBAAR,EAA0BW,QAA1B;AACAI,IAAIC,GAAJ,CAAQL,SAASkB,UAAT,EAAR;AACAd,IAAIC,GAAJ,CAAQL,SAASF,OAAT,EAAR;AACAM,IAAIC,GAAJ,CAAQP,QAAQ;AACdqB,UAAQJ,QAAQC,GAAR,CAAYC,UADN;AAEdG,UAAQ,KAFM;AAGdC,qBAAmB;AAHL,CAAR,CAAR;AAKAjB,IAAIC,GAAJ,CAAQX,aAAaqB,QAAQC,GAAR,CAAYC,UAAzB,CAAR;AACAb,IAAIC,GAAJ,CAAQT,eAAe;AACrB0B,OAAKhC,KAAKoB,IAAL,CAAUC,SAAV,EAAqB,QAArB,CADgB;AAErBY,QAAMjC,KAAKoB,IAAL,CAAUC,SAAV,EAAqB,QAArB,CAFe;AAGrBa,kBAAgB,IAHK,EAGC;AACtBC,aAAW;AAJU,CAAf,CAAR;AAMArB,IAAIC,GAAJ,CAAQjB,QAAQsC,MAAR,CAAepC,KAAKoB,IAAL,CAAUC,SAAV,EAAqB,QAArB,CAAf,CAAR;AACAP,IAAIC,GAAJ,CAAQjB,QAAQsC,MAAR,CAAepC,KAAKoB,IAAL,CAAUC,SAAV,EAAqB,cAArB,CAAf,CAAR;;AAEAtB,QAAQ,UAAR,EAAoBe,GAApB;AACAf,QAAQ,UAAR,EAAoB,YAAM,CAAE,CAA5B;AACAA,QAAQ,cAAR;;AAEAsC,OAAOC,OAAP,GAAiBxB,GAAjB","file":"app.js","sourcesContent":["'use strict'\nconst express = require('express')\nconst path = require('path')\nconst favicon = require('serve-favicon')\nconst logger = require('morgan')\nconst cors = require('cors')\nconst cookieParser = require('cookie-parser')\nconst bodyParser = require('body-parser')\nconst sassMiddleware = require('node-sass-middleware')\nconst requestHeaders = require('./lib/requestHeaders')\n// const uuid = require('uuid')\nconst session = require('express-session')\nconst sslRedirect = require('./lib/ssl-redirect')\nconst passport = require('passport')\nconst jwt = require('jsonwebtoken')\nconst moment = require('moment')\nconst compression = require('compression')\nconst app = express()\napp.use(compression())\napp.use(sslRedirect(['test', 'production']))\nrequestHeaders(app)\napp.disable('x-powered-by')\n// view engine setup\nconst exphbs = require('./handlebars')()\n// view engine setup\napp.engine('hbs', exphbs.engine)\napp.set('views', path.join(__dirname, 'views'))\napp.set('view engine', 'hbs')\n// uncomment after placing your favicon in /public\n//app.use(favicon(path.join(__dirname, 'public', 'favicon.ico')));\napp.use(bodyParser.json())\napp.use(bodyParser.urlencoded({extended: false}))\napp.use(logger('dev'))\n// app.use(cors())\napp.set('secret', process.env.APP_SECRET)\nrequire('./lib/passport')(passport)\napp.use(passport.initialize())\napp.use(passport.session())\napp.use(session({\n  secret: process.env.APP_SECRET,\n  resave: false,\n  saveUninitialized: true\n}))\napp.use(cookieParser(process.env.APP_SECRET))\napp.use(sassMiddleware({\n  src: path.join(__dirname, 'public'),\n  dest: path.join(__dirname, 'public'),\n  indentedSyntax: true, // true = .sass and false = .scss\n  sourceMap: true\n}))\napp.use(express.static(path.join(__dirname, 'public')))\napp.use(express.static(path.join(__dirname, 'node_modules')))\n\nrequire('./routes')(app)\nrequire('./lib/db')(() => {})\nrequire('./lib/events')()\n\nmodule.exports = app\n"]}